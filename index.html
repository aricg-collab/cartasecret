<!DOCTYPE html> 
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Carta Secreta by ari</title>

<style>
body {
  font-family: 'Arial', sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(to bottom, #ffe3fb, #ffd6f5);
  overflow-x: hidden;
}

.screen {
  display: none;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  text-align: center;
  padding: 20px;
}

.active {
  display: flex;
  flex-direction: column;
}

.keypad {
  display: grid;
  grid-template-columns: repeat(3, 60px);
  gap: 10px;
  margin-top: 20px;
  justify-content: center;
}

.key {
  background-color: #ffa1c1;
  border: none;
  border-radius: 12px;
  font-size: 20px;
  padding: 15px;
  cursor: pointer;
}

.input-display {
  font-size: 24px;
  margin-top: 20px;
  letter-spacing: 8px;
}

.notepad {
  background-color: #ffffffd9;
  border: 3px solid #e67ca1;
  padding: 25px;
  border-radius: 20px;
  width: 100%;
  max-width: 500px;
  text-align: left;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  line-height: 1.6;
  box-shadow: 0 15px 35px rgba(0,0,0,0.15);
}

/* BOT√ìN M√öSICA */
.music-btn {
  margin: 10px auto 20px auto;
  background-color: #ff7eb3;
  border: none;
  padding: 10px 20px;
  border-radius: 20px;
  color: white;
  font-weight: bold;
  cursor: pointer;
}

/* SCRATCH */
.scratch-container {
  position: relative;
  width: 100%;
  max-width: 280px;
  margin: 25px auto;
}

.scratch-container img {
  width: 100%;
  border-radius: 18px;
  display: block;
}

#scratchCanvas {
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 18px;
}

#contador {
  text-align: center;
  font-weight: bold;
  margin-top: 15px;
  font-size: 16px;
  color: #c94f7c;
}

.corazon {
  position: fixed;
  pointer-events: none;
  animation: flotar 1.8s ease-out forwards;
}

@keyframes flotar {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translateY(-120px) scale(1.6); opacity: 0; }
}
</style>
</head>

<body>

<audio id="bgMusic" loop>
  <source src="Reina Pepiada (PenduJatt.Com.Se).mp3" type="audio/mpeg">
</audio>

<div id="passwordScreen" class="screen active">
  <h2>üíó El d√≠a que te conoc√≠ üíó</h2>
  <div class="input-display" id="inputDisplay">‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
  <div class="keypad">
    <button class="key" onclick="enterDigit('1')">1</button>
    <button class="key" onclick="enterDigit('2')">2</button>
    <button class="key" onclick="enterDigit('3')">3</button>
    <button class="key" onclick="enterDigit('4')">4</button>
    <button class="key" onclick="enterDigit('5')">5</button>
    <button class="key" onclick="enterDigit('6')">6</button>
    <button class="key" onclick="enterDigit('7')">7</button>
    <button class="key" onclick="enterDigit('8')">8</button>
    <button class="key" onclick="enterDigit('9')">9</button>
    <div></div>
    <button class="key" onclick="enterDigit('0')">0</button>
    <div></div>
  </div>
</div>

<div id="notepadScreen" class="screen">
  <div class="notepad">

    <button class="music-btn" onclick="toggleMusic()">üéµ Reproducir m√∫sica</button>

    <h3>14 de febrero, 2026</h3>
    <h4>Feliz San Valentin Mi bonito üêô</h4>

    <div class="scratch-container">
      <img id="hiddenImage" src="fotito.jpg" alt="Nuestra foto">
      <canvas id="scratchCanvas"></canvas>
    </div>
  <p>
      Es otra fecha importante juntos solo que ahora estamos algo distanciados jsjs.
      Quiero que sepas lo feliz que me haces y lo mucho que te extra√±o aunque solo 
      hayan pasado unos dias jssj. Y si es la primera vez que intento hacer esto por 
      si lo ves algo rarito pero lo intent√© ya que no pude darte el regalo que estaba
      haciendo.
    </p>

    <p>
      Sabes amo cada cosita de ti y el dia que te conoc√≠ todo cambi√≥, no sabia lo 
      importante que serias en mi vida y quisiera que en un futuro sigamos juntos y
      tal vez hasta poder hacer nuestras pijamadas todos los dias jsjs. Se que no 
      siempre hemos tenido buenos momentos pero quiero que sigamos construyendo esto 
      juntos...
    </p>

    <p>
      Te amo de aqui a la luna a pasitos de tortuga üê¢üíó
    </p>
    <p id="contador"></p>

  </div>
</div>

<script>
const correctPassword = '2709';
let input = '';

function enterDigit(digit) {
  if (input.length < 4) input += digit;
  const display = document.getElementById('inputDisplay');
  display.textContent = input.padEnd(4, '‚Ä¢');

  if (input.length === 4) {
    if (input === correctPassword) {
      document.getElementById('passwordScreen').classList.remove('active');
      document.getElementById('notepadScreen').classList.add('active');
      iniciarScratch();
      actualizarContador();
    } else {
      alert('Contrase√±a incorrecta');
      input = '';
      display.textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
    }
  }
}

/* M√öSICA */
function toggleMusic() {
  const music = document.getElementById("bgMusic");
  if (music.paused) {
    music.play();
  } else {
    music.pause();
  }
}

/* CONTADOR */
const fechaInicio = new Date("2022-09-27T00:00:00");

function actualizarContador() {
  const ahora = new Date();
  const diferencia = ahora - fechaInicio;

  const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
  const horas = Math.floor((diferencia / (1000 * 60 * 60)) % 24);
  const minutos = Math.floor((diferencia / (1000 * 60)) % 60);

  document.getElementById("contador").innerHTML =
    `${dias} d√≠as, ${horas} horas y ${minutos} minutos desde el d√≠a que comenz√≥ todo üíñ`;
}

setInterval(actualizarContador, 1000);

/* CORAZONES */
document.addEventListener("click", function(e) {
  if (!document.getElementById('notepadScreen').classList.contains('active')) return;

  const corazon = document.createElement("div");
  corazon.className = "corazon";
  corazon.innerHTML = "üíñ";
  corazon.style.left = e.clientX + "px";
  corazon.style.top = e.clientY + "px";
  corazon.style.fontSize = Math.random() * 20 + 15 + "px";

  document.body.appendChild(corazon);
  setTimeout(() => corazon.remove(), 1800);
});

/* SCRATCH */
function iniciarScratch() {
  const canvas = document.getElementById("scratchCanvas");
  const img = document.getElementById("hiddenImage");

  canvas.width = img.offsetWidth;
  canvas.height = img.offsetHeight;

  const ctx = canvas.getContext("2d");
  ctx.fillStyle = "#c94f7c";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.globalCompositeOperation = "destination-out";

  let isDrawing = false;

  function raspar(e) {
    if (!isDrawing) return;
    const rect = canvas.getBoundingClientRect();
    const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;

    ctx.beginPath();
    ctx.arc(x, y, 20, 0, Math.PI * 2);
    ctx.fill();
  }

  canvas.addEventListener("mousedown", () => isDrawing = true);
  canvas.addEventListener("mouseup", () => isDrawing = false);
  canvas.addEventListener("mousemove", raspar);

  canvas.addEventListener("touchstart", () => isDrawing = true);
  canvas.addEventListener("touchend", () => isDrawing = false);
  canvas.addEventListener("touchmove", raspar);
}
</script>

</body>

</html>
